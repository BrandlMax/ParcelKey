<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>amzn Shop</title>
    <script src="/shop/src/bluetooth.js"></script>
    <link rel="stylesheet" href="./shop/src/style.css">
</head>

<body>
    <div class="stage">
        <header>
            <img src="./shop/src/img/Header.png">
        </header>

        <section class="productImage">
            <img src="./shop/src/img/Image.png">
        </section>
        <section class="productDescription">
            <img src="./shop/src/img/Description.png">
        </section>
        <aside>
            <img src="./shop/src/img/Checkout.png">
            <button id="pkBtn" class="parcelKeyButton" onclick="buyWithParcelKey()">Connect ParcelKey˚</button>
        </aside>

        <footer>
            <img src="./shop/src/img/Footer.png">
        </footer>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        // SOCKET
        let url = window.location.origin;
        let socket = io(url);

        socket.emit('testchannel', 'Hello from Shop');

        socket.on('testchannel', function (data) {
            console.log('testchannel: ' + data);
        });

        socket.on('toShop', function (data) {
            console.log('toShop: ' + data);
        });

        // FUNCTIONS
        function buyWithParcelKey() {

            socket.emit('toParcelKey', 'New Delivery!');
            socket.emit('toAPI', 'New Delivery!');
            // socket.emit('toParcelKeyTracker','Max Mustermann');
            // socket.emit('testchannel','New Buy, dear Server');

            document.getElementById('pkBtn').firstChild.textContent = 'Connecting...'
            setTimeout(() => {
                document.getElementById('pkBtn').firstChild.textContent = 'Morgen 12:30 Uhr'
            }, 2000);

            setTimeout(() => {
                document.getElementById('pkBtn').firstChild.textContent = 'Connect ParcelKey˚'
            }, 30000);

        }
    </script>
</body>

</html>