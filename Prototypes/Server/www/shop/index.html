<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Amazon</title>
    <script src="/shop/src/bluetooth.js"></script>
</head>
<body>
    <h1>Amazon.de</h1>
    <button onclick="buyWithParcelKey()">Connect Bluetooth</button>

    <script src="/shop/src/wsocket.js"></script>
    <script>
        let connection = new WebSocket('ws://192.168.0.150:3001/', ['soap', 'xmpp']);
        let socket;

        connection.onopen = function () {
            socket = new wSocket(connection);

            socket.emit('testchannel','Hello from Shop');

            socket.on('testchannel', function(msg){
                console.log('testchannel: ' + msg);
            });
        };

        connection.onerror = function (error) {
        console.log('WebSocket Error ' + error);
        };

        function buyWithParcelKey(){
            socket.emit('toParcelKey','New Buy');
            socket.emit('toParcelKeyTracker','Max Mustermann');
            socket.emit('testchannel','New Buy, dear Server');
            console.log('send');
        }
    </script>
</body>
</html>